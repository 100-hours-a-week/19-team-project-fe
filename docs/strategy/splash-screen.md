# 스플래시 스크린 구현 로그

이 문서는 React Bits를 활용한 **3D Lanyard 스플래시 스크린**을 프로젝트에 추가하면서 수행한 작업과, 그 과정에서 발생한 문제 및 해결 방법을 기록한 것이다.
구조는 FSD(Feature-Sliced Design)를 따르며, 홈 화면 진입 전 5초간 스플래시를 노출하도록 구성되었다.

---

## 1. 작업 개요

- 3D Lanyard와 오버레이 UI로 구성된 스플래시 화면을 추가했다.
- 홈 화면 진입 전에 약 5초 동안 스플래시가 표시되도록 게이트 로직을 연결했다.
- Turbopack 환경과의 호환성을 위해 3D 에셋 로딩 방식을 조정했다.
- TypeScript에서 3D 모델 및 관련 라이브러리를 인식할 수 있도록 타입 선언을 보강했다.
- 절대 경로(alias) 설정을 정리해 import 구조를 안정화했다.

---

## 2. 사용 라이브러리

패키지 매니저를 통해 다음 라이브러리를 설치했다.

- React Three Fiber (Three.js의 React 바인딩)
- Drei (Three.js 보조 유틸리티 모음)
- Rapier (물리 엔진)
- Three.js
- Meshline (라인 렌더링용)

추가로, React Bits의 Lanyard 컴포넌트를 가져오는 과정에서 자동으로 에셋을 내려받았으나, 해당 과정에서 받은 3D 모델 파일이 손상되어 이후 별도로 교체했다.

---

## 3. 구조 설계 (FSD 기준)

- 스플래시 화면은 **widgets 레이어**로 분리했다.
- 스플래시 관련 로직과 UI는 하나의 위젯으로 묶어 독립성을 유지했다.
- 홈 화면의 실제 콘텐츠 역시 위젯으로 분리하여, 라우트 진입 파일은 조합 역할만 하도록 단순화했다.

결과적으로,

- 스플래시 화면 표시 여부 제어
- 실제 홈 콘텐츠 렌더링
  이 두 역할이 명확히 분리된 구조가 되었다.

---

## 4. 주요 구현 내용

- **SplashGate**
  일정 시간 동안 스플래시 화면을 보여준 뒤 자동으로 홈 콘텐츠로 전환하는 역할을 한다.

- **SplashScreen**
  스플래시 화면의 전체 레이아웃과 오버레이 UI를 담당한다.

- **Lanyard 컴포넌트**
  Three.js 기반의 3D Lanyard 오브젝트를 렌더링한다.

- 홈 화면 진입 시
  → SplashGate가 먼저 렌더링
  → 타이머 종료 후 홈 콘텐츠 표시

---

## 5. 에러 및 해결 과정

### (1) Turbopack과 기존 빌드 설정 충돌

**문제**
Turbopack을 사용하는데 기존 webpack 설정이 함께 존재해 빌드 에러가 발생했다.

**원인**
3D 모델 파일을 처리하기 위해 추가했던 webpack 규칙이 Turbopack과 충돌했다.

**해결**
번들링 단계에서 3D 모델을 처리하지 않고, 정적 리소스로 직접 로딩하는 방식으로 전환했다.
이로 인해 별도의 webpack 설정 자체가 필요 없어졌다.

---

### (2) 절대 경로(alias) 해석 오류

**문제**
절대 경로 import가 의도와 다르게 해석되어 모듈을 찾지 못하는 오류가 발생했다.

**원인**
alias가 프로젝트 루트 기준으로 잘못 설정되어 있었다.

**해결**
alias 기준을 실제 소스 디렉터리로 명확히 지정하고,
TypeScript와 빌드 도구 설정을 동일하게 맞춰 일관성을 확보했다.

---

### (3) 3D 모델 파일 타입 인식 불가

**문제**
빌드 과정에서 3D 모델 파일의 타입을 알 수 없다는 오류가 발생했다.

**원인**
Turbopack 환경에서 커스텀 로더 설정이 기대한 방식으로 동작하지 않았다.

**해결**
모델 파일을 코드에서 import하지 않고, URL 기반으로 직접 로딩하도록 변경했다.

---

### (4) 손상된 GLB 파일 로딩 실패

**문제**
3D 모델 로딩 시 DataView 범위를 벗어났다는 오류가 발생했다.

**원인**
자동 설치 과정에서 내려받은 GLB 파일이 실제로 손상된 상태였다.
파일 검사 결과, 헤더 정보 자체가 정상적이지 않았다.

**해결**
React Bits 공식 저장소에 있는 정상적인 원본 에셋으로 교체하여 문제를 해결했다.

---

## 6. 현재 동작 방식

- 앱 진입 시 스플래시 화면이 먼저 표시된다.
- 약 5초가 지나면 자동으로 스플래시가 사라지고 홈 콘텐츠가 렌더링된다.
- 홈 화면과 스플래시 화면은 서로 독립적인 위젯으로 관리된다.

---

## 7. 이후 개선 아이디어 (선택)

- 스플래시 종료 시 페이드 아웃 애니메이션 추가
- 브랜드 문구나 색상 등 오버레이 UI 커스터마이징
- 3D 카드 모델을 직접 수정해 고유 디자인 적용

---
