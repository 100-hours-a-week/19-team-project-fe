# 개발일지 - 2026-01-23

## 작업 요약
- 채팅 리스트/채팅룸/채팅 상세의 UI 더미 구현 및 라우팅 연결.
- FSD 구조에 맞춰 widgets 단위로 분리하고 app 라우트에서 조합.
- 채팅 라우트 전환 시 스택 네비게이션(좌우 슬라이드) 애니메이션 적용.
- 시간 포맷 규칙(오늘이면 오전/오후 HH:MM, 하루 지나면 MM.DD) 반영.
- 헤더 고정 및 채팅 스크롤 동작(최신 메시지부터 표시) 적용.

## 구현 상세

### 1) FSD 구조 설계 및 라우팅
- widgets
  - `src/widgets/chat-list/`
    - `ui/ChatList.tsx`: 채팅 리스트 화면 UI
    - `index.ts`: export
  - `src/widgets/chat-room/`
    - `ui/ChatRoom.tsx`: 채팅 메시지 화면 UI
    - `index.ts`: export
  - `src/widgets/chat-detail/`
    - `ui/ChatDetail.tsx`: 채팅 상세 화면 UI(참여자/종료 버튼)
    - `index.ts`: export
  - `src/widgets/chat-stack/`
    - `ui/ChatStack.tsx`: 스택 네비게이션 애니메이션 래퍼
    - `index.ts`: export

- app 라우트
  - `src/app/chat/page.tsx`: 채팅 리스트 페이지
  - `src/app/chat/[chatId]/page.tsx`: 채팅룸 페이지
  - `src/app/chat/[chatId]/detail/page.tsx`: 채팅 상세 페이지
  - `src/app/chat/layout.tsx`: 채팅 라우트 공통 레이아웃에 스택 애니메이션 적용

- 연결 흐름
  1) `/chat` 리스트 항목 클릭 → `/chat/[chatId]`
  2) 채팅룸 상단 설정 클릭 → `/chat/[chatId]/detail`
  3) 상세에서 뒤로가기 → `/chat/[chatId]`

### 2) 채팅 리스트 UI (카카오톡 스타일)
- 더미 데이터는 API 응답 구조를 그대로 사용(`chat_id`, `requester`, `receiver`, `last_message`, `unread_count`).
- 프로필은 원형 placeholder로 표시.
- 읽지 않음 배지는 프라이머리 컬러(`--color-primary-main`)로 통일.
- 배경은 `#f7f7f7`로 통일하고 리스트 카드 hover 톤을 `neutral-100`으로 설정.
- 상단에는 배너(둥근 네모 + 이미지 자리) 배치.
- 헤더는 고정(`fixed`) 처리하여 리스트 스크롤과 분리.

### 3) 채팅룸 UI (카카오톡 느낌)
- 메시지 버블
  - 상대: 흰색 배경, 검정 텍스트
  - 나: 프라이머리 컬러 배경, 흰색 텍스트
- 메시지 타임 스탬프는 버블 하단에 소형 텍스트로 표시.
- 더미 대화는 일상 대화로 충분히 길게 구성해 스크롤 동작 확인 가능.
- 최신 메시지가 바로 보이도록 자동 스크롤:
  - 하단 `ref`로 `scrollIntoView`.
- 채팅룸 헤더 고정(`fixed`) + 본문만 `overflow-y-auto`로 스크롤.

### 4) 채팅 상세 페이지 UI
- 상단 헤더 고정 + 참여자 원형 이미지 리스트.
- 하단 고정 버튼(채팅방 종료하기) 배치.
- 스크롤 영역은 참여자 리스트만 움직이도록 분리.

### 5) 스택 네비게이션 애니메이션
- `ChatStack`에서 `pathname` depth 기준으로 전환 방향 결정.
  - `/chat` → `/chat/[id]` → `/chat/[id]/detail`: 오른쪽→왼쪽(Forward)
  - 역방향: 왼쪽→오른쪽(Back)
- 기존 onboarding 스택 애니메이션 클래스를 재사용:
  - `onboarding-stack__screen--forward`
  - `onboarding-stack__screen--back`
- `layout.tsx`에서 `/chat` 하위에 공통 적용해 전체 전환 일관성 유지.

### 6) 시간 포맷 규칙
- 규칙
  - 오늘 메시지: `오전/오후 HH:MM`
  - 하루 지난 메시지: `MM.DD`
- 파싱 실패 시 원본 문자열 그대로 표시.

## 파일/폴더 변경 요약
- `src/app/chat/page.tsx`
- `src/app/chat/layout.tsx`
- `src/app/chat/[chatId]/page.tsx`
- `src/app/chat/[chatId]/detail/page.tsx`
- `src/widgets/chat-list/ui/ChatList.tsx`
- `src/widgets/chat-list/index.ts`
- `src/widgets/chat-room/ui/ChatRoom.tsx`
- `src/widgets/chat-room/index.ts`
- `src/widgets/chat-detail/ui/ChatDetail.tsx`
- `src/widgets/chat-detail/index.ts`
- `src/widgets/chat-stack/ui/ChatStack.tsx`
- `src/widgets/chat-stack/index.ts`
- `src/widgets/footer/ui/Footer.tsx`

## 화면 동작 요약
1) 홈 하단 탭에서 채팅 탭 클릭 → `/chat` 리스트 진입
2) 리스트 클릭 → 채팅룸(`/chat/[chatId]`)으로 슬라이드 전환
3) 채팅룸 설정 클릭 → 상세(`/chat/[chatId]/detail`)로 슬라이드 전환
4) 상세에서 뒤로 이동 → 반대 방향 슬라이드 전환

## 다음 작업 메모
- 채팅 입력창(텍스트 입력 + 전송 버튼) 하단 고정 UI 추가.
- 채팅 상세에서 참여자 정보/역할/상태 표시 여부 결정.
- 메시지 시간 그룹(날짜 구분선) 추가 여부 검토.
